(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"29ba":function(t,e,r){t.exports=r.p+"img/client__photo.c4f0c26b.jpg"},"54a9":function(t,e,r){"use strict";r("ffd08")},e2d1:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("q-layout",{staticClass:"history-visit flex column flex-center q-pt-md q-pl-md q-pt-xl",attrs:{padding:""}},[r("q-header",{staticClass:"history-visit__header bg-secondary flex items-center  text-primary main-font-600",attrs:{reveal:"",elevated:""}},[r("q-btn",{staticClass:"history-visit__back back",attrs:{flat:"",outline:"",color:"primary",dense:"",icon:"navigate_before"},on:{click:function(e){return t.$router.push("/history-visits")}}}),r("q-item-label",{staticClass:"history-visit__client-name"},[t._v("\n       "+t._s(t.currentEntryHaircut.firstname)+"\n     ")]),r("div")],1),r("q-timeline",{staticClass:"text-primary",attrs:{color:"primary"}},[r("template",{slot:"loading"},[r("div",{staticClass:"row justify-center q-my-md"},[r("q-spinner",{attrs:{color:"primary",name:"dots",size:"40px"}})],1)]),t._l(t.beforeRecords,(function(e){return r("q-timeline-entry",{key:e.record_id,staticClass:"text-primary",attrs:{avatar:e.avatar},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n         "+t._s(e.staff)+" "+t._s(e.department_name)+"\n     "),r("p",{staticClass:"text-weight-light"},[t._v("    "+t._s(e.comment))]),e.goods.length>0?r("div",{staticClass:"color-price"},t._l(e.goods,(function(e,s){return r("div",{key:s},[t._v("\n             "+t._s(e.title)+"\n             "),r("div",[t._v("\n               Цена:"+t._s(e.cost)+"\n             ")])])})),0):t._e()]},proxy:!0},{key:"subtitle",fn:function(){return[t._v("\n         "+t._s(e.date)+"\n       ")]},proxy:!0}],null,!0)},[r("div",{staticClass:"q-pa-md"},[e.photos&&e.photos.length>0?r("div",t._l(e.photos,(function(e){return r("q-img",{key:e.path,staticClass:"q-mb-md",staticStyle:{"max-width":"600px"},attrs:{"spinner-color":"primary",src:t.setPhoto(e.path)}})})),1):r("div",{staticClass:"text-primary"},[t._v("Фотографий нет")])])])})),t.activeRecord?r("q-timeline-entry",{ref:"activeRecord",staticClass:"text-primary",attrs:{avatar:t.activeRecord.avatar},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n         "+t._s(t.activeRecord.staff)+" "+t._s(t.activeRecord.department_name)+"\n"),r("p",{staticClass:"text-weight-light"},[t._v("         "+t._s(t.activeRecord.comment))]),t.activeRecord.goods.length>0?r("div",{staticClass:"color-price"},t._l(t.activeRecord.goods,(function(e,s){return r("div",{key:s},[t._v("\n             "+t._s(e.title)+"\n             "),r("div",[t._v("\n               Цена:"+t._s(e.cost)+"\n             ")])])})),0):t._e()]},proxy:!0},{key:"subtitle",fn:function(){return[t._v("\n         "+t._s(t.activeRecord.date)+"\n       ")]},proxy:!0}],null,!1,204566143)},[r("div",{staticClass:"q-pa-md"},[t.activeRecord.photos&&t.activeRecord.photos.length>0?r("div",t._l(t.activeRecord.photos,(function(t){return r("q-img",{key:t.path,staticClass:"q-mb-md",staticStyle:{"max-width":"600px"},attrs:{"spinner-color":"primary",src:t.path}})})),1):r("div",{staticClass:"text-primary"},[t._v("Фотографий нет")])])]):t._e(),t._l(t.afterRecords,(function(e){return r("q-timeline-entry",{key:e.record_id,staticClass:"text-primary",attrs:{avatar:e.avatar},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n         "+t._s(e.staff)+"\n         "+t._s(e.department_name)+"\n      "),r("p",{staticClass:"text-weight-light"},[t._v("   "+t._s(e.comment))]),e.goods.length>0?r("div",{staticClass:"color-price"},t._l(e.goods,(function(e,s){return r("div",{key:s},[t._v("\n             "+t._s(e.title)+"\n             "),r("div",[t._v("\n               Цена:"+t._s(e.cost)+"\n             ")])])})),0):t._e()]},proxy:!0},{key:"subtitle",fn:function(){return[t._v("\n         "+t._s(e.date)+"\n       ")]},proxy:!0}],null,!0)},[r("div",{ref:"afterScroll",refInFor:!0,staticClass:"q-pa-md"},[e.photos&&e.photos.length>0?r("div",t._l(e.photos,(function(t){return r("q-img",{key:t.path,staticClass:"q-mb-md",staticStyle:{"max-width":"600px"},attrs:{"spinner-color":"primary",src:t.path}})})),1):r("div",{staticClass:"text-primary"},[t._v("Фотографий нет")])])])}))],2)],1)},i=[],n=r("29ba"),o=r.n(n),a=r("0831");const{getScrollTarget:c,setScrollPosition:l}=a["a"];var d={name:"HistoryVisit",data(){return{photo:o.a}},mounted(){setTimeout((()=>{this.scrollToElement(this.$refs.activeRecord.$el)}),1e3),window.onscroll=()=>{let t=document.documentElement.scrollTop+window.innerHeight===document.documentElement.offsetHeight,e=window.pageYOffset||document.documentElement.scrollTop;0===e&&(console.log("scrollTop"),this.$store.dispatch("EntriesHaircut/getListRecordHistoryBefore",{record_id:this.currentEntryHaircut.record_id,user_id:this.currentEntryHaircut.user_id,length:this.beforeRecords.length})),t&&(console.log("bottomOfWindow"),this.$store.dispatch("EntriesHaircut/getListRecordHistoryAfter",{record_id:this.currentEntryHaircut.record_id,user_id:this.currentEntryHaircut.user_id,length:this.afterRecords.length}))}},beforeDestroy(){window.onscroll=null},created(){this.$store.dispatch("EntriesHaircut/getListRecordHistory",{record_id:this.currentEntryHaircut.record_id,user_id:this.currentEntryHaircut.user_id})},methods:{scrollToElement(t){const e=c(t),r=t.offsetTop,s=1;l(e,r,s)}},watch:{},computed:{currentEntryHaircut(){return this.$store.getters["EntriesHaircut/currentEntryHaircut"]},afterRecords(){return this.$store.getters["EntriesHaircut/afterRecords"]},activeRecord(){return this.$store.getters["EntriesHaircut/activeRecords"]},beforeRecords(){return this.$store.getters["EntriesHaircut/beforeRecords"]}}},u=d,p=(r("54a9"),r("2877")),m=r("4d5a"),_=r("e359"),f=r("9c40"),h=r("0170"),v=r("05eb"),y=r("0d59"),g=r("74af"),x=r("068f"),b=r("880c"),R=r("24e8"),C=r("66e5"),w=r("eebe"),E=r.n(w),H=Object(p["a"])(u,s,i,!1,null,null,null);e["default"]=H.exports;E()(H,"components",{QLayout:m["a"],QHeader:_["a"],QBtn:f["a"],QItemLabel:h["a"],QTimeline:v["a"],QSpinner:y["a"],QTimelineEntry:g["a"],QImg:x["a"],QCarousel:b["a"],QDialog:R["a"],QItem:C["a"]})},ffd08:function(t,e,r){}}]);