(function(t){function e(e){for(var n,a,i=e[0],c=e[1],l=e[2],u=0,d=[];u<i.length;u++)a=i[u],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);p&&p(e);while(d.length)d.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],n=!0,a=1;a<r.length;a++){var i=r[a];0!==o[i]&&(n=!1)}n&&(s.splice(e--,1),t=c(c.s=r[0]))}return t}var n={},a={1:0},o={1:0},s=[];function i(t){return c.p+"js/"+({}[t]||t)+"."+{2:"fa426fe6",3:"e94e8952",4:"01996f19",5:"ff6cf44e",6:"a06c98b5",7:"c245128a",8:"feb4713b",9:"470259c6",10:"3bdf92fb",11:"bfe9579c",12:"4513d2f9",13:"7fcb9f90"}[t]+".js"}function c(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.e=function(t){var e=[],r={2:1,3:1,4:1,5:1,6:1,7:1,8:1,10:1};a[t]?e.push(a[t]):0!==a[t]&&r[t]&&e.push(a[t]=new Promise((function(e,r){for(var n="css/"+({}[t]||t)+"."+{2:"6f0b4e26",3:"d7c1896b",4:"5870a83d",5:"dc4eb3bf",6:"807ba65d",7:"e35708a2",8:"4bd81fca",9:"31d6cfe0",10:"b7c2d548",11:"31d6cfe0",12:"31d6cfe0",13:"31d6cfe0"}[t]+".css",o=c.p+n,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var l=s[i],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===n||u===o))return e()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){l=d[i],u=l.getAttribute("data-href");if(u===n||u===o)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var n=e&&e.target&&e.target.src||o,s=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=n,delete a[t],p.parentNode.removeChild(p),r(s)},p.href=o;var m=document.getElementsByTagName("head")[0];m.appendChild(p)})).then((function(){a[t]=0})));var n=o[t];if(0!==n)if(n)e.push(n[2]);else{var s=new Promise((function(e,r){n=o[t]=[e,r]}));e.push(n[2]=s);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=i(t);var d=new Error;l=function(e){u.onerror=u.onload=null,clearTimeout(p);var r=o[t];if(0!==r){if(r){var n=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+n+": "+a+")",d.name="ChunkLoadError",d.type=n,d.request=a,r[1](d)}o[t]=void 0}};var p=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(e)},c.m=t,c.c=n,c.d=function(t,e,r){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(r,n,function(e){return t[e]}.bind(null,n));return r},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="",c.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var p=u;s.push([0,0]),r()})({0:function(t,e,r){t.exports=r("2f39")},"2f39":function(t,e,r){"use strict";r.r(e);r("ddb0"),r("5319"),r("7d6e"),r("e54f"),r("4848"),r("c382"),r("985d"),r("31cd");var n=r("2b0e"),a=r("1f91"),o=r("42d2"),s=r("b05d"),i=r("515f"),c=r("2a19"),l=r("f508"),u=r("18d6"),d=r("a639");n["a"].use(s["a"],{config:{loading:{spinnerColor:"primary"}},lang:a["a"],iconSet:o["a"],plugins:{Cookies:i["a"],Notify:c["a"],Loading:l["a"],LocalStorage:u["a"],SessionStorage:d["a"]}});var p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-layout",{staticClass:"relative-position",attrs:{id:"q-app"}},[n("Update"),n("q-page-container",[n("router-view"),n("PWAPrompt",{attrs:{copyClosePrompt:"Закрыть",copyShareButtonLabel:'Нажмите кнопку "Поделиться"',copyAddHomeButtonLabel:'Нажмите "Добавить на главный экран".',copyBody:"Этот веб-сайт имеет функции приложения. Добавьте его на главный экран, чтобы использовать его в полноэкранном режиме и в автономном режиме.",copyTitle:"Добавить на домашний экран.",debug:!1}}),n("q-dialog",{model:{value:t.confirm,callback:function(e){t.confirm=e},expression:"confirm"}},[t.showInstallBanner?n("q-card",[n("q-banner",{staticClass:"bg-secondary text-primary flex column flex-center",staticStyle:{border:"2px solid #4FD8DB"},attrs:{dark:"",rounded:""},scopedSlots:t._u([{key:"avatar",fn:function(){return[n("q-img",{staticClass:"transparent q-mb-md",attrs:{width:"220px",src:r("c8d3")}})]},proxy:!0},{key:"action",fn:function(){return[n("q-btn",{staticClass:"bg-secondary text-primary",attrs:{flat:"",label:"Да"},on:{click:t.installApp}}),n("q-btn",{staticClass:"bg-secondary text-primary",attrs:{flat:"",label:"Позже"},on:{click:t.letterShowAppInstallBanner}}),n("q-btn",{staticClass:"bg-secondary text-primary",attrs:{flat:"",label:"Никогда"},on:{click:t.neverShowAppInstallBanner}})]},proxy:!0}],null,!1,136731061)},[n("div",{staticClass:"q-mb-md"},[t._v("\n            Установить приложение Мастер?\n          ")])])],1):t._e()],1)],1)],1)},m=[],f=r("bc3a"),h=r.n(f);r("5638");window.Pusher=r("782e");let y="web.20x80.one"===window.location.hostname?"https://backend.20x80.one":"https://bis.zdato.ru";window.location.hostname;const g=h.a.create({baseURL:y+"/api",withCredentials:!1,headers:{"Content-Type":"application/json"}});var E=r("2b15"),b=r.n(E),_=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("q-dialog",{model:{value:t.displayUpdatePrompt,callback:function(e){t.displayUpdatePrompt=e},expression:"displayUpdatePrompt"}},[r("q-banner",{scopedSlots:t._u([{key:"action",fn:function(){return[r("q-btn",{attrs:{label:"Update"},on:{click:t.refreshApp}})]},proxy:!0}])},[t._v("\n    A new version is available.\n    ")])],1)},w=[],S=r("acfa"),v={name:"Update",data(){return{displayUpdatePrompt:!1,workbox:null}},methods:{refreshApp(){this.workbox.addEventListener("controlling",(()=>{window.location.reload()})),this.workbox.messageSkipWaiting()}},created(){"service-worker"in navigator&&(this.workbox=new S["a"]("/service-worker.js"),this.workbox.addEventListener("waiting",(t=>{this.displayUpdatePrompt=!0})),this.workbox.register())}},T=v,R=r("2877"),A=r("24e8"),C=r("54e1"),I=r("9c40"),O=r("eebe"),H=r.n(O),L=Object(R["a"])(T,_,w,!1,null,null,null),N=L.exports;let P;H()(L,"components",{QDialog:A["a"],QBanner:C["a"],QBtn:I["a"]});var k={name:"App",data(){return{showInstallBanner:!1,confirm:!1,sound:null}},created(){const t=i["a"].get("jwt-master")&&i["a"].get("user-master"),e=d["a"].getItem("jwt-master")&&d["a"].getItem("user-master");t?this.$store.commit("Authorization/SET_USER_DATA",t):e&&this.$store.commit("Authorization/SET_SESSION_USER_DATA",e),g.interceptors.response.use((t=>t),(t=>(401===t.response.status&&(this.$store.dispatch("Authorization/logout"),this.$router.push("/login")),Promise.reject(t)))),this.sound=new Audio("https://messages.20x80.one/files/notify.mp3")},mounted(){let t=this.$q.localStorage.getItem("neverShowAppInstallBanner");t||window.addEventListener("beforeinstallprompt",(t=>{t.preventDefault(),P=t,this.showInstallBanner=!0,setTimeout((()=>{this.confirm=!0}),1e3)})),this.notifications(),setInterval((()=>{this.notifications()}),5e3)},components:{Update:N,PWAPrompt:b.a},watch:{},methods:{closeConfrim(){this.confirm=!1},async installApp(){P.prompt();const{outcome:t}=await P.userChoice;console.log(`User response to the install prompt: ${t}`),this.showInstallBanner=!1,this.closeConfrim()},neverShowAppInstallBanner(){this.showInstallBanner=!1,this.$q.localStorage.set("neverShowAppInstallBanner",!0),this.closeConfrim()},letterShowAppInstallBanner(){this.showInstallBanner=!1,this.closeConfrim()},notifications(){const t=this.$store.getters["Authorization/notifyConnection"],e=this.$store.getters["Authorization/token"];if(t&&t.readyState<2||!e)return;t&&(t.removeEventListener("message",this.notifyMessage),t.removeEventListener("logged_in",this.notifyLoggedIn));const r=new EventSource("https://messages.20x80.one:62101/stream/?token="+e);r.addEventListener("logged_in",this.notifyLoggedIn),this.$store.commit("Authorization/SET_NOTIFY_CONNECTION",r)},notifyLoggedIn(){console.log("%cПодключился к оповещениям","color: orange"),this.$store.getters["Authorization/notifyConnection"].addEventListener("message",this.notifyMessage)},notifyMessage(t){this.sound.play(),this.$q.notify({message:JSON.parse(t.data),color:"purple",timeout:36e5,closeBtn:"X"})}}},x=k,U=(r("5c0b"),r("4d5a")),j=r("09e3"),$=r("f09f"),B=r("068f"),q=Object(R["a"])(x,p,m,!1,null,null,null),D=q.exports;H()(q,"components",{QLayout:U["a"],QPageContainer:j["a"],QDialog:A["a"],QCard:$["a"],QBanner:C["a"],QImg:B["a"],QBtn:I["a"]});var Y=r("2f62");const z={layout:"default-layout"},F={setLayout(t,e){t.layout=e}},M={},Q={layout(t){return t.layout}};var V={namespaced:!0,state:z,mutations:F,actions:M,getters:Q};const W={user:null,notifyConnection:null},J={SET_USER_DATA(t,e){t.user=e,i["a"].set("user-master",e),i["a"].set("jwt-master",e.token),g.defaults.headers.common["Authorization"]=`Bearer ${e.token}`},CLEAR_USER_DATA(){i["a"].remove("user-master"),i["a"].remove("jwt-master"),g.defaults.headers.common["Authorization"]=null},CLEAR_SESSION_USER_DATA(){d["a"].remove("user-master"),d["a"].remove("jwt-master"),g.defaults.headers.common["Authorization"]=null},SET_SESSION_USER_DATA(t,e){t.user=e,d["a"].set("user-master",e),d["a"].set("jwt-master",e.token),g.defaults.headers.common["Authorization"]=`Bearer ${e.token}`},SET_NOTIFY_CONNECTION(t,e){t.notifyConnection=e},CLEAR_USER_STATE(t){t.user=null}},G={async login({commit:t,dispatch:e},r){try{const{rememberMe:e}=r,{data:n}=await g.post("/login",r);return console.log(e,"rememberMe"),t(e?"SET_USER_DATA":"SET_SESSION_USER_DATA",n),n}catch({response:{data:{error:n}}}){return{type:"negative",message:n}}},async logout({commit:t}){t("CLEAR_USER_DATA"),t("CLEAR_SESSION_USER_DATA"),t("SET_NOTIFY_CONNECTION",null),t("CLEAR_USER_STATE")}},K={loggedIn(t){return t.user?(console.log(t.user,"loggedIn"),t.user.user_data.user):null},token(t){return t.user?t.user.token:null},notifyConnection(t){return t.notifyConnection}};var X={namespaced:!0,state:W,mutations:J,actions:G,getters:K};const Z={entries:null,pastHaircutsClient:null,currentEntryHaircut:null,currentHistoryHaircut:null,dateOfEntries:null,listRecordHistory:null},tt={SET_ENTRIES(t,e){t.entries=e},SET_HAIRCUTS_CLIENT(t,e){t.pastHaircutsClient=e},SET_CURRENT_ENTRY_HAIRCUT_CLIENT(t,e){t.currentEntryHaircut=e},SET_CURRENT_HISTORY_HAIRCUT_CLIENT(t,e){t.currentEntryHaircut=e},SET_DATE_OF_ENTRIES(t,e){t.dateOfEntries=e},SET_LIST_RECORD_HISTORY(t,e){t.listRecordHistory=e},SET_LIST_RECORD_HISTORY_AFTER(t,e){e.forEach((e=>{t.listRecordHistory.after.push(e)}))},SET_LIST_RECORD_HISTORY_BEFORE(t,e){e.forEach((e=>{t.listRecordHistory.before.unshift(e)}))}},et={async getEntries({commit:t,dispatch:e}){try{const{data:{data:e}}=await g.get("mobile-all-records-staff");t("SET_ENTRIES",e)}catch(r){}},async getEntry({commit:t,dispatch:e},r){try{await g.get(`/mobile-record-client/${r}`)}catch(n){}},async getPastHaircutsClient({commit:t,dispatch:e},r){try{const{data:{data:e}}=await g.get(`/mobile-all-records-client/${r}`);return t("SET_HAIRCUTS_CLIENT",e),e}catch(n){}},async getCurrentEntryHaircut({commit:t,dispatch:e},r){try{const{data:{data:e}}=await g.get(`/mobile-record-client/${r}`);return t("SET_CURRENT_ENTRY_HAIRCUT_CLIENT",e),e}catch(n){}},async getCurrentHistoryHaircut({commit:t,dispatch:e},r){try{const{data:{data:e}}=await g.get(`/mobile-record-client/${r}`);return t("SET_CURRENT_HISTORY_HAIRCUT_CLIENT",e),e}catch(n){}},async setDataCurrentHaircut({commit:t,dispatch:e},r){try{const{record_id:t}=r,{formData:e}=r;return await g.post(`/mobile-record-client/${t}`,e)}catch(n){}},async getDateHaircut({commit:t,dispatch:e},r){try{const{data:{data:e}}=await g.get(`/mobile-all-records-staff?date=${r}`);t("SET_ENTRIES",e)}catch(n){}},async getListRecordHistory({commit:t,dispatch:e},r){const{record_id:n}=r,{user_id:a}=r;try{const{data:{data:e}}=await g(`mobile-list-records-client/${n}?user_id=${a}`);console.log(e,"SET_LIST_RECORD_HISTORY"),t("SET_LIST_RECORD_HISTORY",e)}catch(o){}},async getListRecordHistoryBefore({commit:t,dispatch:e},r){const{record_id:n}=r,{user_id:a}=r,{length:o}=r;try{const{data:{data:e}}=await g(`mobile-next-records-client/${n}?user_id=${a}&skip=${o}&before=true`);return console.log(e,"getListRecordHistoryBefore"),t("SET_LIST_RECORD_HISTORY_BEFORE",e),e}catch(s){}},async getListRecordHistoryAfter({commit:t,dispatch:e},r){const{record_id:n}=r,{user_id:a}=r,{length:o}=r;try{const{data:{data:e}}=await g(`mobile-next-records-client/${n}?user_id=${a}&skip=${o}&after=true`);console.log(e,"getListRecordHistoryAfter"),t("SET_LIST_RECORD_HISTORY_AFTER",e)}catch(s){}}},rt={entries(t){if(t.entries)return t.entries},pastHaircutsClient(t){if(t.pastHaircutsClient)return t.pastHaircutsClient},currentEntryHaircut(t){if(t.currentEntryHaircut)return t.currentEntryHaircut},dateOfEntries(t){return t.dateOfEntries},afterRecords(t){if(t.listRecordHistory)return t.listRecordHistory.after},beforeRecords(t){if(t.listRecordHistory)return t.listRecordHistory.before},activeRecords(t){if(t.listRecordHistory)return t.listRecordHistory.active}};var nt={namespaced:!0,state:Z,mutations:tt,actions:et,getters:rt};const at={reviews:null},ot={SET_REVIEWS(t,e){t.reviews=e}},st={async getReviews({commit:t,dispatch:e}){try{const{data:{data:e}}=await g.get("/comment/staff");return t("SET_REVIEWS",e),e}catch(r){}}},it={ShowReviews(t){if(t.reviews)return t.reviews}};var ct={namespaced:!0,state:at,mutations:ot,actions:st,getters:it};const lt={rating:""},ut={SET_RATING(t,e){t.rating=e}},dt={async sendAvatar({commit:t,dispatch:e},r){try{const t=await g.post("/mobile/load-avatar",r);console.log(t,"sendAvatar")}catch(n){}},async getRating({commit:t,dispatch:e}){try{const{data:{data:e}}=await g("/mobile/analytics");console.log(e,"getRating"),t("SET_RATING",e)}catch(r){}}},pt={};var mt={namespaced:!0,state:lt,mutations:ut,actions:dt,getters:pt};n["a"].use(Y["a"]);var ft=function(){const t=new Y["a"].Store({modules:{Layout:V,Authorization:X,EntriesHaircut:nt,Reviews:ct,Profile:mt}});return t},ht=r("8c4f");const yt=[{path:"/",component:()=>Promise.all([r.e(0),r.e(4)]).then(r.bind(null,"04dd")),children:[{path:"",meta:{requiresAuth:!0},component:()=>Promise.all([r.e(0),r.e(6)]).then(r.bind(null,"825b"))},{path:"/history-visits",meta:{requiresAuth:!0},component:()=>Promise.all([r.e(0),r.e(8)]).then(r.bind(null,"fd2e"))},{path:"/history-visit",meta:{requiresAuth:!0},component:()=>Promise.all([r.e(0),r.e(7)]).then(r.bind(null,"e2d1"))},{path:"/current-visit",meta:{requiresAuth:!0},component:()=>Promise.all([r.e(0),r.e(2)]).then(r.bind(null,"9076"))},{path:"/profile",meta:{requiresAuth:!0},component:()=>Promise.all([r.e(0),r.e(5)]).then(r.bind(null,"13b3")),children:[{path:"",meta:{requiresAuth:!0},component:()=>Promise.all([r.e(0),r.e(9)]).then(r.bind(null,"2ff9"))},{path:"/profile/reviews",meta:{requiresAuth:!0},component:()=>Promise.all([r.e(0),r.e(10)]).then(r.bind(null,"1f3e"))},{path:"/profile/rating",meta:{requiresAuth:!0},component:()=>r.e(13).then(r.bind(null,"8a7e"))}]}]},{path:"/login",component:()=>r.e(11).then(r.bind(null,"25b3")),children:[{path:"",component:()=>Promise.all([r.e(0),r.e(3)]).then(r.bind(null,"013f"))}]},{path:"*",component:()=>Promise.all([r.e(0),r.e(12)]).then(r.bind(null,"e51e"))}];var gt=yt;n["a"].use(ht["a"]);var Et=function(){const t=new ht["a"]({scrollBehavior:()=>({x:0,y:0}),routes:gt,mode:"hash",base:""});return t.beforeEach(((t,e,r)=>{const n=i["a"].get("jwt-master")&&i["a"].get("user-master"),a=d["a"].getItem("jwt-master")&&d["a"].getItem("user-master");!t.matched.some((t=>t.meta.requiresAuth))||n||a||r("/login"),r()})),t},bt=async function(){const t="function"===typeof ft?await ft({Vue:n["a"]}):ft,e="function"===typeof Et?await Et({Vue:n["a"],store:t}):Et;t.$router=e;const r={router:e,store:t,render:t=>t(D),el:"#q-app"};return{app:r,store:t,router:e}},_t=r("9483");Object(_t["a"])("service-worker.js",{ready(){},registered(){},cached(){},updatefound(){},updated(){},offline(){},error(){}}),n["a"].prototype.$axios=h.a;var wt=r("8537"),St=()=>{Object(wt["a"])(window)};/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&window.navigator.standalone&&r.e(0).then(r.t.bind(null,"a0db",7));const vt="";async function Tt(){const{app:t,store:e,router:r}=await bt();let a=!1;const o=t=>{a=!0;const e=Object(t)===t?r.resolve(t).route.fullPath:t;window.location.href=e},s=window.location.href.replace(window.location.origin,""),i=[void 0,St];for(let l=0;!1===a&&l<i.length;l++)if("function"===typeof i[l])try{await i[l]({app:t,router:r,store:e,Vue:n["a"],ssrContext:null,redirect:o,urlPath:s,publicPath:vt})}catch(c){return c&&c.url?void(window.location.href=c.url):void console.error("[Quasar] boot error:",c)}!0!==a&&new n["a"](t)}Tt()},"31cd":function(t,e,r){},"5c0b":function(t,e,r){"use strict";r("ffd0")},"5c3f":function(t,e,r){var n={"./pwa-action-sheet.entry.js":["cfc4",0],"./pwa-camera-modal-instance.entry.js":["fa8e",0],"./pwa-camera-modal.entry.js":["4977",0],"./pwa-camera.entry.js":["da8b",0],"./pwa-toast.entry.js":["6357",0]};function a(t){if(!r.o(n,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=n[t],a=e[0];return r.e(e[1]).then((function(){return r(a)}))}a.keys=function(){return Object.keys(n)},a.id="5c3f",t.exports=a},c8d3:function(t,e,r){t.exports=r.p+"img/logo-banner.e1d3dcaf.svg"},ffd0:function(t,e,r){}});